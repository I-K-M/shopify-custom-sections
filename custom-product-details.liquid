{% assign sid = section.id | replace: '_', '' | downcase %}

{%- if selected and selected.tall != blank -%}
  {%- assign left_text_value = selected.tall -%}
{%- else -%}
  {%- assign left_text_value = section.settings.left_text -%}
{%- endif -%}

<section class="depth-section-{{ sid }}">
  <div class="depth-wrapper-{{ sid }}">

    {% if left_text_value != blank %}
      <div class="depth-text-{{ sid }}">
        {{ left_text_value }}
      </div>
    {% endif %}

    {% if selected and selected.product_usages.value != blank %}
      {% for usage in selected.product_usages.value %}
        <div class="depth-item-{{ sid }}">

          {% if usage.icon != blank %}
            {{ usage.icon
              | image_url: width: 80
              | image_tag: loading: 'lazy'
            }}
          {% endif %}

          <div class="depth-item-text-{{ sid }}">
            {% if usage.title != blank %}
              <strong>{{ usage.title }}</strong><br>
            {% endif %}
            {% if usage.description != blank %}
              <span>{{ usage.description }}</span>
            {% endif %}
          </div>

        </div>
      {% endfor %}
    {% endif %}

  </div>
</section>

<style>
.depth-section-{{ sid }}{
  background:#fff;
  padding:30px 20px;
}

.depth-wrapper-{{ sid }}{
  max-width:1160px;
  margin:0 auto;
  display:flex;
  align-items:center;
  gap:40px;
}

.depth-text-{{ sid }}{
  max-width:335px;
  font-size:16px;
}

.depth-item-{{ sid }}{
  display:flex;
  align-items:center;
  gap:20px;
  font-size:15px;
}

.depth-item-{{ sid }} img{
  width:40px;
  height:auto;
}

.depth-item-text-{{ sid }} strong{
  font-weight:600;
}

/* Mobile */
@media(max-width:768px){
  .depth-wrapper-{{ sid }}{
    flex-direction:column;
    align-items:flex-start;
    gap:20px;
    width:fit-content;
    margin:0 auto
  }

  .depth-item-{{ sid }}{
    font-size:14px;
    width:fit-content
  }
  .depth-text-{{ sid }} {
  max-width:320px
}
}
</style>

{% schema %}
{
  "name": "Custom product details",
  "settings": [
    {
      "type": "text",
      "id": "left_text",
      "label": "Fallback left text",
      "default": "At this level you'll get:"
    }
  ],
  "presets": [
    {
      "name": "Custom product details"
    }
  ]
}
{% endschema %}
