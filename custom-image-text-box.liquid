{% comment %}
  Section: Custom info card on leafy background
  - Background image (cover) + optional overlay
  - Pretitle (with optional icon) + Heading
  - Center white card with left rich text + right image
{% endcomment %}

{% assign sid = section.id | replace: '_', '' | downcase %}

<section class="custom-image-text-box custom-image-text-box-{{ sid }}">
  <div class="custom-image-text-box__bg-{{ sid }}">
    {% if section.settings.background_image != blank %}
      <img
        class="custom-image-text-box__bg-img-{{ sid }}"
        src="{{ section.settings.background_image | image_url: width: 2400 }}"
        alt="{{ section.settings.background_image.alt | escape }}"
        loading="lazy"
        width="2400"
        height="1200"
      >
    {% endif %}
    <div class="custom-image-text-box__overlay-{{ sid }}"></div>
  </div>

  <div class="page-width custom-image-text-box__wrap-{{ sid }}">
    <div class="custom-image-text-box__header-{{ sid }}">
      {% if section.settings.pretitle != blank %}
        <div class="section-header__pretitle custom-image-text-box__pretitle-{{ sid }}">
          {% if section.settings.pretitle_icon != blank %}
            <img
              class="section-header__pretitle-icon"
              src="{{ section.settings.pretitle_icon | image_url: width: 48 }}"
              alt=""
              loading="lazy"
              width="30"
              height="30"
            >
          {% endif %}
          <span>{{ section.settings.pretitle }}</span>
        </div>
      {% endif %}

      {% if section.settings.heading != blank %}
        <h2 class="custom-image-text-box__heading-{{ sid }}" style="color:#fff">{{ section.settings.heading }}</h2>
      {% endif %}
    </div>

    <div class="custom-image-text-box__card-{{ sid }}">
      <div class="custom-image-text-box__card-inner-{{ sid }}">
        <div class="custom-image-text-box__card-left-{{ sid }}">
          {% if section.settings.card_text != blank %}
            <div class="custom-image-text-box__card-text-{{ sid }}">
              {{ section.settings.card_text }}
            </div>
          {% endif %}
        </div>

        <div class="custom-image-text-box__card-right-{{ sid }}">
          {% if section.settings.card_image != blank %}
            <img
              class="custom-image-text-box__card-img-{{ sid }} custom-image-text-box__card-img"
              src="{{ section.settings.card_image | image_url: width: 1200 }}"
              alt="{{ section.settings.card_image.alt | escape }}"
              loading="lazy"
              width="1200"
              height="900"
            >
          {% else %}
            <div class="custom-image-text-box__card-imgph-{{ sid }}">
              {{ 'image' | placeholder_svg_tag }}
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .custom-image-text-box-{{ sid }}{
    position: relative;
    overflow: hidden;
    padding: {{ section.settings.padding_y }}px 0;
    color: {{ section.settings.text_color }};
  }

  .custom-image-text-box__bg-{{ sid }}{
    position: absolute;
    inset: 0;
    z-index: 0;
    pointer-events: none;
  }
  .custom-image-text-box__bg-img-{{ sid }}{
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    display: block;
  }
  .custom-image-text-box__overlay-{{ sid }}{
    position: absolute;
    inset: 0;
    background: {{ section.settings.overlay_color }};
    opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};
  }

  .custom-image-text-box__wrap-{{ sid }}{
    position: relative;
    z-index: 1;
    text-align: center;
  }

  .custom-image-text-box__header-{{ sid }}{
    max-width: {{ section.settings.header_max_width }}px;
    margin: 0 auto {{ section.settings.header_gap }}px auto;
  }

  .custom-image-text-box__pretitle-{{ sid }}{
    justify-content: center;
    margin-bottom: 12px;
  }
  .custom-image-text-box__pretitle-{{ sid }} span {
    color: #F1D1A7;
  }

  .custom-image-text-box__heading-{{ sid }}{
    margin: 0;
    font-size: {{ section.settings.heading_size }}px;
    line-height: 1.1;
    color: {{ section.settings.heading_color }};
  }

  /* CARD */
  .custom-image-text-box__card-{{ sid }}{
    max-width: {{ section.settings.card_max_width }}px;
    margin: 0 auto;
    background: {{ section.settings.card_bg }};
    border-radius: {{ section.settings.card_radius }}px;
    padding: {{ section.settings.card_padding }}px;
    box-shadow: 0 16px 40px rgba(0,0,0,0.12);
  }

  .custom-image-text-box__card-inner-{{ sid }}{
    display: flex;
    align-items: center;
    gap: {{ section.settings.card_gap }}px;
  }

  .custom-image-text-box__card-left-{{ sid }}{
    flex: 1 1 0;
    text-align: left;
    min-width: 0;
  }

  .custom-image-text-box__card-text-{{ sid }}{
    font-size: {{ section.settings.card_text_size }}px;
    line-height: 1.7;
    color: {{ section.settings.card_text_color }};
  }
  .custom-image-text-box__card-text-{{ sid }} p{ margin: 0 0 14px 0; }
  .custom-image-text-box__card-text-{{ sid }} p:last-child{ margin-bottom: 0; }

  .custom-image-text-box__card-right-{{ sid }}{
    flex: 0 0 {{ section.settings.image_col_width }}%;
    min-width: 0;
    display: flex;
    justify-content: center;
  }

  .custom-image-text-box__card-img-{{ sid }}{
    width: 100%;
    height: auto;
    max-height: {{ section.settings.image_max_height }}px;
    object-fit: contain;
    border-radius: {{ section.settings.image_radius }}px;
    display: block;
  }

  .custom-image-text-box__card-imgph-{{ sid }}{
    width: 100%;
    aspect-ratio: 4 / 3;
    background: rgba(0,0,0,0.08);
    border-radius: {{ section.settings.image_radius }}px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Mobile */
  @media (max-width: 900px){
    .custom-image-text-box__card-inner-{{ sid }}{
      flex-direction: column;
      align-items: stretch;
    }
    .custom-image-text-box__card-right-{{ sid }}{
      flex: 0 0 auto;
      width: 100%;
    }
  }
</style>

{% schema %}
{
  "name": "Custom image text box",
  "class": "index-section",
  "settings": [
    { "type": "header", "content": "Background" },
    { "type": "image_picker", "id": "background_image", "label": "Background image" },
    { "type": "color", "id": "overlay_color", "label": "Overlay color", "default": "#0b6b3a" },
    { "type": "range", "id": "overlay_opacity", "label": "Overlay opacity", "min": 0, "max": 100, "step": 5, "unit": "%", "default": 70 },

    { "type": "header", "content": "Header" },
    { "type": "text", "id": "pretitle", "label": "Pretitle", "default": "Why Choose Birdies Garden" },
    { "type": "image_picker", "id": "pretitle_icon", "label": "Pretitle icon" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "What Is Garden Edging?" },

    { "type": "header", "content": "Card" },
    { "type": "color", "id": "card_bg", "label": "Card background", "default": "#ffffff" },
    { "type": "range", "id": "card_max_width", "label": "Card max width", "min": 680, "max": 1400, "step": 20, "unit": "px", "default": 1200 },
    { "type": "range", "id": "card_radius", "label": "Card radius", "min": 0, "max": 40, "step": 2, "unit": "px", "default": 20 },
    { "type": "range", "id": "card_padding", "label": "Card padding", "min": 16, "max": 80, "step": 4, "unit": "px", "default": 40 },
    { "type": "range", "id": "card_gap", "label": "Card columns gap", "min": 10, "max": 60, "step": 5, "unit": "px", "default": 40 },

    { "type": "richtext", "id": "card_text", "label": "Card text (left)", "default": "<p>Garden edging is used to define boundaries within a garden, creating clean lines between lawns, garden beds, pathways, and landscaped areas.</p><p>It helps maintain structure, prevents material migration, and improves the overall appearance of outdoor spaces.</p>" },
    { "type": "color", "id": "card_text_color", "label": "Card text color", "default": "#333333" },
    { "type": "range", "id": "card_text_size", "label": "Card text size", "min": 12, "max": 22, "step": 1, "unit": "px", "default": 16 },

    { "type": "image_picker", "id": "card_image", "label": "Card image (right)" },
    { "type": "range", "id": "image_col_width", "label": "Image column width", "min": 30, "max": 55, "step": 1, "unit": "%", "default": 40 },
    { "type": "range", "id": "image_max_height", "label": "Image max height", "min": 220, "max": 600, "step": 10, "unit": "px", "default": 360 },
    { "type": "range", "id": "image_radius", "label": "Image radius", "min": 0, "max": 30, "step": 2, "unit": "px", "default": 14 },

    { "type": "header", "content": "Layout" },
    { "type": "range", "id": "padding_y", "label": "Padding top/bottom", "min": 20, "max": 160, "step": 10, "unit": "px", "default": 80 },
    { "type": "range", "id": "header_max_width", "label": "Header max width", "min": 420, "max": 1100, "step": 20, "unit": "px", "default": 900 },
    { "type": "range", "id": "header_gap", "label": "Gap under header", "min": 10, "max": 80, "step": 5, "unit": "px", "default": 40 },

    { "type": "header", "content": "Typography" },
    { "type": "range", "id": "heading_size", "label": "Heading size", "min": 24, "max": 80, "step": 2, "unit": "px", "default": 60 },
    { "type": "color", "id": "heading_color", "label": "Heading color", "default": "#ffffff" },
    { "type": "color", "id": "text_color", "label": "General text color", "default": "#dfeee6" }
  ],
  "presets": [
    { "name": "Custom image text box" }
  ],
  "disabled_on": {
    "groups": ["custom.popups"]
  }
}
{% endschema %}
